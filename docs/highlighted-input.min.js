export function highlightedInput(e,t){const l=document.createElement("div");l.className="highlighted-wrap";const n=document.createElement("div");n.className="highlighted-layer",e.classList.add("highlighted-input"),e.parentNode.insertBefore(l,e),l.appendChild(e),l.appendChild(n);const c=Object.keys(t),r={"&":"&amp;","<":"&lt;",">":"&gt;"," ":" ","\n":"<br>"},i=()=>{n.scrollLeft=e.scrollLeft,n.scrollTop=e.scrollTop},s=()=>{const l=new RegExp(`(${c.map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("|")})`,"g");let s=e.value.replace(/[&<>\n ]/g,(e=>r[e]));s=s.replace(l,(e=>`<span class="highlighted-term ${t[e]}">${e}</span>`)),n.innerHTML=s||" ",i()};return e.addEventListener("input",s),["scroll","select","click","keyup"].forEach((t=>{e.addEventListener(t,i)})),s(),{cleanup(){e.removeEventListener("input",s),["scroll","select","click","keyup"].forEach((t=>{e.removeEventListener(t,i)}))}}}export default highlightedInput;
